.section .tooltip {
  margin: 0.4rem;
  pointer-events: none;

  &.fade {
    transition: opacity 125ms linear;
  }

  &.in {
    opacity: 1;
  }

  .tooltip-inner {
    max-width: none;
    padding: 0.4rem;
    background: $offwhite;
    box-shadow: 0 3px 12px rgba(37, 37, 37, 0.3);
  }

  &.top {
    padding: 0;
    padding-bottom: 1.4rem;
    margin-top: 0.8rem;

    .tooltip-arrow {
      bottom: 0;

      &::after {
        transform: translateX(-50%) translateY(-50%) rotate(135deg);
      }
    }
  }

  &.bottom {
    padding: 0;
    padding-top: 1.4rem;
    margin-top: -0.8rem;

    .tooltip-arrow {
      top: 0;

      &::after {
        transform: translateX(-50%) translateY(50%) rotate(135deg);
      }
    }
  }

  .tooltip-arrow {
    width: 3rem;
    height: 1.4rem;
    position: absolute;
    overflow: hidden;
    border: 0;
    margin-left: -1.5rem;

    &::after {
      content: "";
      position: absolute;
      width: 1.4rem;
      height: 1.4rem;
      background: $offwhite;
      top: 0;
      left: 50%;
      box-shadow: 0 0 12px rgba(37, 37, 37, 0.18);
    }
  }

  .preview {
    background: url(resources/bg.png) no-repeat, transparent;
    background-color: #293347;
    background-position: top, center;
    background-size: cover, cover;
    position: relative;

    .i {
      width: 100%;
      height: 100%;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      border-radius: 3px;

      & + .i {
        border-left: 0.2rem solid $offwhite;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
      }
    }

    &.img {
      width: $preview-img-width;
      height: $preview-img-height;
    }

    &.img.two {
      width: calc(#{$preview-img-two-width} + 0.2rem);
      height: $preview-img-height * ($preview-img-two-modifier / 2);
      display: flex;

      .i:first-child {
        border-right: 0.2rem solid $offwhite;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      }
    }

    &.video {
      width: $preview-video-width;
      height: $preview-video-height;

      video {
        height: 100%;
        width: 100%;
      }
    }

    &.audio {
      width: $preview-audio-width;
      height: $preview-audio-height;
      background: $offwhite;

      .audio-player {
        display: flex;
        justify-content: space-between;
        align-content: center;
      }

      .icon {
        font-size: 2.8rem;
        padding: 0.6rem 1rem;
        color: $grey;
        display: inline-block;
      }

      .player {
        border-radius: 0.2rem;
        background: rgba(0, 0, 0, 0.15);
        position: relative;
        flex: 1;

        .progress {
          height: 100%;
          margin: 0;
          box-shadow: none;
          background: orange;
          border-radius: 0.2rem;
          position: absolute;
        }
      }
    }

    .description {
      position: absolute;
      bottom: 0;
      background-color: rgba($overwatch-blue--primary, 0.5);
      line-height: 1.4;
      padding: 1em;
      font-family: $font__base;
      text-transform: uppercase;
      font-size: 1.4rem;
      text-align: left;
      border-left: 3px solid rgba(255, 255, 255, 0.3);
      margin: 2rem;
      color: #fff;
    }
  }
}

@each $name, $data in $item-types {
  $preview-info: map-get($data, preview);
  $aliases: map-get($data, aliases);

  // Only override default if there is anything to override.
  @if map-has-key($preview-info, width) and map-has-key($preview-info, height) {
    $two-width: map-get($preview-info, width) * $preview-img-two-modifier;

    %#{$name}-tooltip {
      width: map-get($preview-info, width);
      height: map-get($preview-info, height);
    }

    %#{$name}-tooltip-two {
      width: calc(#{$two-width} + 0.2rem);
      height: map-get($preview-info, height) * ($preview-img-two-modifier / 2);
    }

    @each $alias in $aliases {
      ##{$alias} .tooltip .preview.#{map-get($preview-info, type)} {
        @extend %#{$name}-tooltip;
      }

      @if map-get($preview-info, type) == "img" {
        ##{$alias} .tooltip .preview.#{map-get($preview-info, type)}.two {
          @extend %#{$name}-tooltip-two;
        }
      }
    }
  }

  @if $name == "icons" {
    @each $alias in $aliases {
      ##{$alias} .tooltip .preview {
        border-radius: 0.3rem;
      }
    }
  }
}
